/*  _________________________________________________
 *  2012, CBS Interactive 
 *  Andy Devendorf
 *  Library & Slider
 *  _________________________________________________ 
 */
 
 var csui={data:{version:"2.3",jquery:false},getId:function(a){return document.getElementById(a)},slide:function(d,b,a,c){if(csui.data.jquery){$(d).animate({left:b},a,c)}else{morpheus(d,{duration:a,left:b,complete:c})}},vertSlide:function(d,b,a,c){if(csui.data.jquery){$(d).animate({top:b},a,c)}else{morpheus(d,{duration:a,top:b,complete:c})}},fadeTo:function(d,b,a,c){if(csui.data.jquery){$(d).animate({opacity:b},a,c)}else{morpheus(d,{duration:a,opacity:b,complete:c})}},animateH:function(d,a,b,c){if(csui.data.jquery){$(d).animate({height:b},a,c)}else{morpheus(d,{duration:a,height:b,complete:c})}},animateW:function(d,a,b,c){if(csui.data.jquery){$(d).animate({width:b},a,c)}else{morpheus(d,{duration:a,width:b,complete:c})}},hide:function(a){a.style.display="none"},show:function(a){a.style.display="block";csui.setOpacity(a,1)},getOpacity:function(a){return a.style.opacity},setOpacity:function(b,a){b.style.opacity=a;b.style.filter="alpha(opacity="+parseInt(a*100)+")"},getPosition:function(b){var a={};a.x=parseInt(b.style.left);a.y=parseInt(b.style.top);return a}};csui.data.jquery=(typeof jQuery==="function")?true:false;if(csui.data.jquery===false){var script=document.createElement("script");script.src="http://grfx.cstv.com/scripts/csui/csui.morpheus.js";var head=document.getElementsByTagName("head")[0];(head||document.body).appendChild(script)}var csuiSlider=function(){var q,A,l,y,v,e,m,a=true,i=false;var m=this;var j=[];var c;var b=0;var p={position:0,stop:false,fadeSetUp:false,padding:0,div:"UNIQUENAME",loop:true,animation:"slide",speed:500,rotationTimer:0,showControls:false,autoHideControls:false,slideAmount:"whole",direction:1,whenComplete:null,enableTouch:true};this.init=function(B){for(var s in p){if(typeof B[s]!="undefined"){p[s]=B[s]}}p.whenComplete.call(this)};this.setSlider=function(s){q=document.getElementById(p.div+"-slider");p.padding=(s)?s:0;q.style.width="5000px";i=true};this.startSlider=function(){if(i==false){setTimeout(function(){m.startSlider()},500);return}q=document.getElementById(p.div+"-slider");e=q.parentNode.offsetWidth;if(a){if(p.showControls){if(p.autoHideControls){if(d()>q.parentNode.offsetWidth){r()}}else{r()}}a=false}w();if(p.rotationTimer>0){l=setTimeout(function(){m.manualMove(1*p.direction)},p.rotationTimer)}};this.pauseSlider=function(){csui.setOpacity(q,1);clearTimeout(l);h()};this.getPosition=function(){return p.position};this.stop=function(){csui.setOpacity(q,1);clearTimeout(l);p.stop=true;h()};this.manualMove=function(s){w();u(s)};this.moveTo=function(s){var B=s>p.position?1:-1;u(B,s)};this.replay=function(){if(p.rotationTimer>0){l=setTimeout(function(){m.manualMove(1*p.direction)},p.rotationTimer)}};var w=function(B){j=null;j=[];for(var s=0;s<q.getElementsByTagName("li").length;s++){if(q.getElementsByTagName("li")[s].className.indexOf("-element")>=0){j.push(q.getElementsByTagName("li")[s].offsetWidth)}}if(B){B.call()}};var g=function(){if(!q.style.left){q.style.left="0px"}return parseInt(q.style.left)};var k=function(s){var B=0;for(var C=0;C<s;C++){B+=j[C]}return B};var d=function(){var s=0;for(var B=0;B<j.length;B++){s+=j[B]}return s};var o=function(){return q.getElementsByTagName("li").length};var h=function(){clearTimeout(l)};var f=function(s){return k(s)*-1};var z=function(C,B,D){var s;if(p.loop){if(C===1){for(s=0;s<B;s++){q.removeChild(q.getElementsByTagName("li")[0])}q.style.left=f(D-B)+"px";p.position=0}else{for(s=0;s<B;s++){q.removeChild(q.getElementsByTagName("li")[q.getElementsByTagName("li").length-1])}q.style.left=f(0)+"px";p.position=0}}q.style.width="20000px";if(p.rotationTimer>0&&p.stop===false){l=setTimeout(function(){m.manualMove(1*p.direction)},p.rotationTimer)}w(function(){y=false})};var x=function(C){var s=0;var D=0;var B=0;if(C===1){while(D<=e){if(p.position+s>=j.length){if(B===0){B=s}D+=j[0+s-B]}else{D+=j[p.position+s]}s++}s-=1;if(s==0){s=1}return s}else{D=p.padding;while(D<=e){D+=j[(j.length-1)-s];s++}s--;return s}};var t=function(){var B=0;var s=0;var C=p.position;while(B+j[C]<=e-p.padding&&C<j.length){B+=j[C];s++}return s};var n=function(){for(var s=0;s<q.getElementsByTagName("li").length;s++){if(q.getElementsByTagName("li")[s].className.indexOf("-element")>=0){q.getElementsByTagName("li")[s].style.position="absolute";q.getElementsByTagName("li")[s].style.opacity=0;q.getElementsByTagName("li")[s].style.filter="alpha(opacity=0)";q.getElementsByTagName("li")[s].style.display="none";q.getElementsByTagName("li")[s].style.left="0px"}}q.getElementsByTagName("li")[p.position].style.opacity=1;q.getElementsByTagName("li")[p.position].style.filter="alpha(opacity=100)";q.getElementsByTagName("li")[p.position].style.display="block"};var u=function(D,K){if(y){return}y=true;if(p.animation==="slide"){if(d()<=q.parentNode.offsetWidth){return}var J,H,B;var C=g();h();var N=x(D);var E=t();if(p.loop===false&&((C===0&&D===-1)||(D===1&&p.position+N>=o()))){y=false;return}if(p.slideAmount==="whole"){if(D===-1&&N>p.position){H=0}else{H=p.position+(N*D)}var s=N}else{H=p.position+1*D;var s=1}q.style.width="20000px";if(p.loop){var L,G,M=0;if(D===1){for(L=0;L<s;L++){q.appendChild(q.getElementsByTagName("li")[L].cloneNode(true))}H=s;q.style.left="0px"}else{var I=q.getElementsByTagName("li").length-1;for(L=0;L<s;L++){M-=q.getElementsByTagName("li")[I].offsetWidth;G=q.getElementsByTagName("li")[I].cloneNode(true);q.insertBefore(G,q.getElementsByTagName("li")[0]);q.style.left=M+"px"}H=0}}if(typeof K!="undefined"){H=K}if(p.speed>0){csui.slide(csui.getId(p.div+"-slider"),f(H),p.speed,function(){z(D,s,H)})}else{q.style.left=f(H)+"px";z(D,s,H)}p.position=parseInt(H)}else{var C=g();if(p.loop===false&&((p.position===0&&D===-1)||(D===1&&p.position+1>o()-1))){y=false;return}if(p.fadeSetUp===false){n()}H=p.position+(1*D);if(H>o()-1){H=0}if(H<0){H=o()-1}if(K){H=K}q.getElementsByTagName("li")[H].style.display="block";csui.fadeTo(q.getElementsByTagName("li")[H],1,p.speed,function(){y=false});var F=p.position;if(F!=H){csui.fadeTo(q.getElementsByTagName("li")[F],0,p.speed,function(){q.getElementsByTagName("li")[F].style.display="none"})}p.position=parseInt(H);if(p.rotationTimer>0&&p.stop===false){l=setTimeout(function(){m.manualMove(1*p.direction)},p.rotationTimer)}}};var r=function(){if(p.showControls!==true){return}var C,E,B,D;C=document.createElement("div");C.setAttribute("id",p.div+"-butt-right");C.className="slider-button-right";E=document.createElement("a");E.setAttribute("title","Next");E.setAttribute("id",p.div+"-gor");E.setAttribute("onclick","return false;");E.innerHTML="&gt;";C.appendChild(E);q.parentNode.parentNode.appendChild(C);C=document.createElement("div");C.setAttribute("id",p.div+"-butt-left");C.className="slider-button-left";E=document.createElement("a");E.setAttribute("onclick","return false;");E.setAttribute("title","Previous");E.setAttribute("id",p.div+"-gol");E.innerHTML="&lt;";C.appendChild(E);q.parentNode.parentNode.appendChild(C);document.getElementById(p.div+"-gor").onclick=function(){m.stop();m.manualMove(1*p.direction);return false};document.getElementById(p.div+"-gol").onclick=function(){m.stop();m.manualMove(-1*p.direction);return false};if(p.enableTouch){var s=document.getElementById(p.div);s.ontouchstart=function(F){c=false;b=F.touches[0].clientX;m.stop();return true};s.ontouchmove=function(F){if(c==false&&Math.abs(F.touches[0].clientX-b)>20){if(F.touches[0].clientX>b){c=true;m.stop();m.manualMove(-1*p.direction)}else{if(F.touches[0].clientX<b){c=true;m.stop();m.manualMove(1*p.direction)}}}return false};s.ontouchend=function(F){if(c==true){return false}c=false;b=0;return true}}}};